/**
 * @file opentestloader_struct.h
 * @author gerioldman (k.gergo49@gmail.com)
 * @brief Definitions for the descriptor struct at the beginning of test images 
 * @date 2024-05-09
 * 
 * @copyright Copyright (c) 2024
 * 
 */

#ifndef OPENTESTLOADER_STRUCT_H
#define OPENTESTLOADER_STRUCT_H

#include <stdint.h>

typedef void (*func_ptr)(char);
typedef void (*test_ptr)(void);

typedef struct {
    uint32_t checksum;  // Checksum written by the bootloader to verify valid application, won't ever be used in this application
    uint32_t version;   // Version this struct, so future changes won't break old test builds
    func_ptr send_char; // Function pointer to send a char, used for transmitting the textual result of the test.
    test_ptr run_test; // Function pointer to send a char, used for transmitting the textual result of the test.
    const void* bss_start;
    const void* bss_end;
    const void* data_start;
    const void* data_end;
    const void* init_start;
}opentestloader_struct;

#endif // OPENTESTLOADER_STRUCT_H